(()=>{let e=["C","H","S","D"],t=["A","J","Q","K"],[r,l,a]=document.querySelectorAll(".button"),[n,s]=document.querySelectorAll("small"),[d,i]=document.querySelectorAll(".card_img"),c=[],o=0,$=0,u=()=>{let r=[];for(let l=2;l<10;l++)for(let a of e)r.push(l+a);for(let n of t)for(let s of e)r.push(n+s);return _.shuffle(r)},p=e=>{if(0===e.length)throw"There's no more cards";return{lastCard:e.pop(),updatedDeck:e}},f=e=>{let t=e.substring(0,e.length-1);return isNaN(t)?"A"===t?11:10:Number(t)},b=e=>{l.disabled=!0,a.disabled=!0;do{let{lastCard:t,updatedDeck:r}=p(c);$+=f(t),c=r,s.innerText=$;let n=document.createElement("img");if(n.src=`assets/cartas/${t}.png`,n.classList.add("card"),i.append(n),e>21)break}while($<e&&$<=21);setTimeout(()=>{e===$?alert("It's a draw"):e>21?alert("Computer won!!"):$>21?alert("Player won!!"):alert("Computer won!!")},500)};l.addEventListener("click",()=>{let{lastCard:e,updatedDeck:t}=p(c);o+=f(e),c=t,n.innerText=o;let r=document.createElement("img");r.src=`assets/cartas/${e}.png`,r.classList.add("card"),d.append(r),o>21?(l.disabled=!0,b(o)):21===o&&(l.disabled=!0,b(o))}),a.addEventListener("click",()=>{b(o)}),r.addEventListener("click",()=>{c=u(),o=0,$=0,n.innerText=0,s.innerText=0,d.innerHTML="",i.innerHTML="",l.disabled=!1,a.disabled=!1}),c=u()})();